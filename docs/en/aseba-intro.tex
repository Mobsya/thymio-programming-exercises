% !TeX root = aseba.tex

\chap{Introduction}

This document describes programs that instruct the Thymio-II robot to
perform algorithms for typical robotics applications. It assumes that
you are familiar with the Thymio-II robot; if not, see my
\href{https://aseba.wdfiles.com/local--files/en:thymioprogram/thymio-vpl-tutorial-en.zip}{tutorial}
on programming the robot using the VPL visual programming environment.
You must understand the concept of \emph{event} and the concept of
\emph{action} that the robot does in response to the occurrence of an
event.

The Aseba (textual) programming language and the Studio development
environment will not be difficult to learn if you have experience in any
programming language. There is a
\href{https://aseba.wikidot.com/en:thymiotutoriel}{tutorial} that can
help.

\sect{Project structure}

Each chapter starts with the specification of the task to be performed.
This is followed by a description of the system design and then by an
explanation of the program:

\begin{itemize}
\item Specification
\item System design
\item State machine (see below)
\item Constants
\item Variables
\item Event handlers and subroutines
\item Programming notes
\item Experiments
\end{itemize}

\centeredbox{I strongly suggest that you work on each part by yourself and only
then compare your solution to mine.}

\newpage

Some of the projects described are:

\begin{itemize}

\item \emph{The cat catches the mouse}: The robot is a cat which
searches for and catches a mouse. This type of requirement is common
when a robot has to locate an object to grab it and move it someplace.

\item \emph{How fast is the Thymio?}: The performance of the robot is
measured. We compute the speed and acceleration of the robot, and
the relationship between the amount of power applied to the motors and
the acceleration of the robot.

\item \emph{Line following}: An autonomous robot must be able to
\emph{navigate}, that is, to move from its current position to a new
position, for example, by following a line displayed on the floor.

\end{itemize}

Elementary versions of some of these projects are contained in the VPL
tutorial. Here we present better solutions that use the capabilities of
the textual programming language.

\sect{State machines}

You stand in front of a vending machine and wait for a candy bar to be
pushed out. Nothing happens. You push a button to select which candy you
want. Nothing happens. Finally, you put some coins in the machine.
Nothing happens. Again, you push a button to make a selection. Now, the
machine starts working and the candy is pushed out.

A vending machine is really a robot; it's task is to give candy to
people. The task of a vending machine is divided into
smaller subtasks and only one subtask is active at any time. We say that
the machine can be in several \emph{states} and that there are
conditions that determine when the machine makes a \emph{transition}
from one state to the next. The states and transitions can be described
in the diagram of a \emph{state machine}, where the states are the ovals
and the transitions are the arrows:

\begin{center}
\unitlength=1.4pt
\begin{picture}(280,45)
%\put(0,0){\framebox(280,45){}}
\put(30,10){\oval(60,20)}
\put(140,10){\oval(60,20)}
\put(250,10){\oval(60,20)}
\put(0,0){ \makebox(60,20){\shortstack{\bu{expect}\\\bu{coins}}}}
\put(110,0){\makebox(60,20){\shortstack{\bu{expect}\\\bu{selection}}}}
\put(220,0){\makebox(60,20){\shortstack{\bu{wait for}\\\bu{candy}}}}
\put( 60,10){\vector(1,0){50}}
\put( 58,10){\makebox(48,10){\bu{put coin}}}
\put(170,10){\vector(1,0){50}}
\put(171,10){\makebox(48,10){\bu{press button}}}
\put(250,20){\line(0,1){15}}
\put(30,35){\line(1,0){220}}
\put(30,35){\makebox(220,10){\bu{candy pushed}}}
\put(30,35){\vector(0,-1){15}}
\end{picture}
\end{center}

The state machine makes it clear why you won't receive any candy just by
standing in front of the vending machine. Candy is pushed out only in
the rightmost state which can be reached only after putting coins and
making a selection.

All our projects use state machines to describe the behavior of the
robots. The state machine can be as simple as:

\begin{center}
\unitlength=1.4pt
\begin{picture}(180,45)
%\put(0,0){\framebox(180,45){}}
\put(30,10){\oval(60,20)}
\put(150,10){\oval(60,20)}
\put(0,0){ \makebox(60,20){\bu{off}}}
\put(120,0){\makebox(60,20){\bu{on}}}
\put( 60,10){\vector(1,0){60}}
\put( 60,10){\makebox(60,20){\shortstack{\bu{press}\\\bu{center button}}}}
\put(150,20){\line(0,1){15}}
\put(30,35){\line(1,0){120}}
\put(30,35){\makebox(120,10){\bu{press center button}}}
\put(30,35){\vector(0,-1){15}}
\end{picture}
\end{center}

but usually it will be more complex because the robot---like a vending
machine---must perform several subtasks.

\sect{References}

\begin{itemize}
\item VPL tutorial to get acquainted with the Thymio-II robot:\\ 
\url{https://aseba.wdfiles.com/local--files/en:thymioprogram/}\\\hspace*{2em}\url{thymio-vpl-tutorial-en.zip}

\item Tutorial on programming Thymio with Aseba:\\
\url{https://aseba.wikidot.com/en:thymiotutoriel}.

\item An overview of the Studio environment:\\
\url{https://aseba.wikidot.com/en:asebastudio}

\item The reference manual for the Aseba textual programming language:\\
\url{https://aseba.wikidot.com/en:asebalanguage}

\item The programming interface for the Thymio-II robot:\\
\url{https://aseba.wikidot.com/en:thymioapi}

\item The programming interface for the Thymio-II robot as a one-page
image:\\
\url{https://aseba.wdfiles.com/local--files/en:thymioprogram/}\\
\hspace*{2em}\url{ThymioCheatSheet.pdf} (in PDF format) or\\
\hspace*{2em}\url{ThymioCheatSheet.svg} (in SVG format)

\item How to download an Aseba program into the Thymio-II:\\
\url{https://aseba.wikidot.com/en:thymioflash}

\item The native functions (mathematical) library:\\
\url{https://aseba.wikidot.com/en:asebastdnative}

\end{itemize}
